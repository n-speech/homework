<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Вход — Личный кабинет</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="center">
    <div class="card login-card">
      <h1>Вход</h1>
      <label class="label">Email</label>
      <input id="email" type="email" placeholder="example@mail.com" />

      <label class="label">Пароль</label>
      <input id="password" type="password" placeholder="Пароль" />

      <button id="loginBtn" class="btn">Войти</button>
      <p id="error" class="error"></p>

      <p class="note">Тестовый аккаунт: <b>test@mail.com / 12345</b></p>
    </div>
  </main>

  <script>
    const STORAGE_KEY = "lk_user_cached";

    // тестовые пользователи
    const users = [
      { email: "test@mail.com", password: "12345", name: "Тест", courses: [1,3] }
    ];

    const loginBtn = document.getElementById("loginBtn");
    const error = document.getElementById("error");

    loginBtn.addEventListener("click", () => {
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      const user = users.find(u => u.email === email && u.password === password);

      if (!user) {
        error.textContent = "Неверный email или пароль";
        return;
      }

      // сохраняем в localStorage
      localStorage.setItem(STORAGE_KEY, JSON.stringify(user));

      // переходим в личный кабинет
      window.location.href = "dashboard.html";
    });

    // НЕ делаем автоматический редирект на dashboard,
    // чтобы не зацикливалось при пустом localStorage
  </script>
</body>
</html>
